<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="style.menu.css">
    <link rel="stylesheet" href="style.login.css">
</head>

<body>

<!-- Sidebar -->
<div class="sidebar">
    <div class="block">
        <img src="images\logo-lego-final.png" alt="logo">
    </div>
    <a href="login.html"class="active">Login</a>
    <a href="kits.html">Kits</a>
    <a href="build.html">Build</a>
</div>
<!-- Login box -->
<div class="box">
    <h2 class="title">Login</h2>

    <form id="loginForm">
        <div id="errorMessage" style="display: none; color: #d32f2f; background-color: #ffebee; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-size: 14px;"></div>
        
        <input type="text" id="username" placeholder="Nom d'utilisateur" required>
        <input type="password" id="password" placeholder="Mot de passe" required>
        <button type="submit">Se connecter</button>
    </form>
    
    <div style="margin-top: 30px; padding: 20px; background-color: #e8f5e9; border-radius: 8px; font-size: 13px; color: #2e7d32;">
        <strong>üë§ Comptes de test :</strong><br><br>
        <strong>Admin :</strong> admin / admin123 ‚Üí admin_kits.html<br>
    </div>
</div>

<script>
// Utilisateurs pr√©d√©finis avec leurs pages de destination
const users = {
    'admin': {
        password: 'admin123',
        role: 'admin',
        redirectTo: 'admin_kits.html'
    },
};

// R√©cup√©rer le formulaire
const loginForm = document.getElementById('loginForm');
const errorMessage = document.getElementById('errorMessage');

// G√©rer la soumission du formulaire
loginForm.addEventListener('submit', function(e) {
    e.preventDefault(); // Emp√™cher la soumission par d√©faut
    
    // R√©cup√©rer les valeurs
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    
    // V√©rifier les identifiants
    if (users[username] && users[username].password === password) {
        // Connexion r√©ussie
        // Stocker les informations de l'utilisateur
        sessionStorage.setItem('isLoggedIn', 'true');
        sessionStorage.setItem('username', username);
        sessionStorage.setItem('role', users[username].role);
        
        // Rediriger vers la page sp√©cifique de l'utilisateur
        window.location.href = users[username].redirectTo;
    } else {
        // Afficher un message d'erreur
        errorMessage.textContent = '‚ùå Nom d\'utilisateur ou mot de passe incorrect';
        errorMessage.style.display = 'block';
        
        // Effacer le message apr√®s 3 secondes
        setTimeout(() => {
            errorMessage.style.display = 'none';
        }, 3000);
        
        // Vider le champ mot de passe
        document.getElementById('password').value = '';
    }
});

// V√©rifier si l'utilisateur est d√©j√† connect√©
window.addEventListener('load', function() {
    if (sessionStorage.getItem('isLoggedIn') === 'true') {
        const username = sessionStorage.getItem('username');
        // Rediriger vers la page appropri√©e si d√©j√† connect√©
        if (users[username]) {
            window.location.href = users[username].redirectTo;
        }
    }
});
</script>

</body>
</html>